{% extends "layout.html" %}

{% block content %}
<h1>Ledger</h1>
<p>The Jam ledger can be found below.</p>
<br>
<table>
    <tr>
        <th>Bank date</th>
        <th>Bank text</th>
        <th>Description</th>
        <th>Receipt</th>
        <th>Paid out</th>
        <th>Paid in</th>
        <th>Running total</th>
        <th>Paid by</th>
        <th>Secondary approved</th>
        <th>Verified by</th>
        <th>Category</th>
        <th>Notes</th>
    </tr>
    {% for t in transactions %}
        <tr>
            <td>{{ t.bank_date }}</td>
            <td>{{ t.bank_text }}</td>
            <td onclick='editLedgerDescription("{{ t.transaction_id }}", this.textContent, this)'>{{ t.description }}</td>
            {% if t.receipt_url %}
                <td><a href="{{ t.receipt_url }}" target="_blank" class="btn btn-info" role="button">Receipt</a><br></td>
            {% else %}
                <td><a href="" target="_blank" class="btn btn-info" disabled="true" role="button">Receipt</a><br></td>
            {% endif %}
            <td>{{ t.paid_out_symbol }}</td>
            <td>{{ t.paid_in_symbol }}</td>
            <td></td>
            <td>{% if t.payment_by %}{{ t.payment_by }}{% else %}<a href="{{ t.receipt_url }}" class="btn btn-info" role="button">Claim</a>{% endif %}</td>
            <td>{{ t.secondary_approved_by }}</td>
            <td>{{ t.verified_by }}</td>
            <td>{{ t.category }}</td>
            <td>{{ t.treasurer_notes }}</td>
        </tr>
    {% endfor %}
</table>
{% endblock %}